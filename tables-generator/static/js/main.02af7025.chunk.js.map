{"version":3,"sources":["app/createSequence.js","utils/index.js","reducers/index.js","stores/index.js","actions/configureSequence.js","actions/saveSequenceDefinition.js","actions/cancelSaveSequenceDefinition.js","components/SequenceTable.jsx","components/ConfigurableSequenceTable.jsx","components/ConfigureForm.jsx","App.js","index.js"],"names":["directions","defaultOptions","start","end","step","switchAfter","direction","isEven","num","switchback","seq","size","rows","curr","length","row","slice","push","map","index","padRowWithNulls","isRTL","reverse","createSequence","i","saveToLocalstorage","key","data","window","localStorage","setItem","JSON","stringify","error","console","sequenceDefinitions","red","width","green","blue","initialState","sequences","Object","entries","reduce","acc","id","seqDef","activeSequence","getInitialState","parse","getItem","getFromLocalstorage","timestamp","state","lastModified","Date","now","appStore","createStore","nextState","action","type","sequenceId","sequenceDefinition","SequenceTable","this","props","className","val","disabled","React","Component","ConfigurableSequenceTable","onConfigureClick","widthPercent","styles","style","data-sequence-id","onClick","SequenceId","color","FormRow","children","ConfigureForm","handleCancel","e","preventDefault","onCancel","handleSubmit","sequenceDef","onSubmit","keys","form","current","getAttribute","value","parseInt","createRef","restoreFocusTo","document","activeElement","querySelector","focus","ref","htmlFor","name","defaultValue","data-type","mapDispatchToProps","configureSequence","saveSequenceDefinition","cancelSaveSequenceDefinition","connect","showConfigure","Boolean","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.02af7025.chunk.js","sourcesContent":["const directions = {\n  LTR: 'LTR',\n  RTL: 'RTL'\n};\n\nconst defaultOptions = {\n  start: 1,\n  end: 10,\n  step: 1,\n  switchAfter: 5,\n  direction: directions.LTR\n};\n\nfunction isRTL(direction) {\n  return direction === directions.RTL;\n}\n\nfunction isEven(num) {\n  return num % 2 === 0;\n}\n\nfunction padRowWithNulls(row, size) {\n  while (row.length < size) {\n    row.push( null );\n  }\n  return row;\n} \n\nfunction switchback(seq, size, direction) {\n  const rows = [];\n  let curr = 0;\n  while (curr < seq.length) {\n    const end = curr + size;\n    const row = seq.slice(curr, end);\n    rows.push(row);\n    \n    curr = end;\n  }\n  // Switch every odd row\n  const switchedRows = rows.map( (row, index) => {\n    if (index === rows.length - 1) {\n      padRowWithNulls(row, size);\n    }\n\n    if (isRTL(direction)) {\n      return isEven(index) ? row.reverse() : row; \n    } else {\n      return isEven(index) ? row : row.reverse(); \n    }\n  });\n  \n  return switchedRows.reverse();\n}\n\nexport function createSequence({ start, end, step, switchAfter, direction } = defaultOptions) {\n  const seq = [];\n  step = step || defaultOptions.step\n  for (let i=start; i<=end; i=i+step) {\n    seq.push(i);\n  }\n  \n  return switchback(seq, switchAfter, direction );\n}\n","export function toInt(val) {\n  return parseInt(val, 10);\n}\n\nexport function saveToLocalstorage(key, data) {\n  if (window.localStorage) {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(data))\n    } catch (error) {\n      console.error(error)\n    }\n  }\n}\n\nexport function getFromLocalstorage(key) {\n  if (window.localStorage) {\n    try {\n      return JSON.parse(window.localStorage.getItem(key));\n    } catch (error) {\n      console.error(error)\n    }\n  }\n}\n","import { createSequence } from '../app/createSequence';\nimport { CONFIGURE_SEQUENCE } from '../actions/configureSequence';\nimport { SAVE_SEQUENCE_DEFINITION } from '../actions/saveSequenceDefinition';\nimport { CANCEL_SAVE_SEQUENCE_DEFINITION } from '../actions/cancelSaveSequenceDefinition';\nimport { saveToLocalstorage, getFromLocalstorage } from '../utils';\n\nconst STORAGE_KEY = 'SEQTABLE';\n\nconst sequenceDefinitions = {\n    red: { start: 8, end: 29, step: 1, switchAfter: 5, width: 20, direction: 'LTR' },\n    green: { start: 231, end: 247, step: 1, switchAfter: 5, width: 30, direction: 'LTR' },\n    blue: { start: 47, end: 81, step: 2, switchAfter: 5, width: 40, direction: 'RTL' }\n  };\n\nconst sequences = Object.entries(sequenceDefinitions)\n  .reduce((acc, [id, seqDef]) => {\n    acc[id] = createSequence(seqDef);  \n    return acc;\n  }, {});\n\nconst initialState = {\n  sequenceDefinitions,\n  sequences,\n  activeSequence: null\n};\n\nfunction getInitialState() {\n  const persistedState = getFromLocalstorage(STORAGE_KEY);\n  return persistedState || initialState;\n}\n\nfunction timestamp(state) {\n  state.lastModified = Date.now();\n  return state;\n}\n\nexport const tables = function(state = getInitialState(), action) {\n  let nextState;\n\n  switch (action.type) {\n    case CONFIGURE_SEQUENCE:\n      nextState = { ...state, activeSequence: action.sequenceId };\n      break;\n    case SAVE_SEQUENCE_DEFINITION:\n      const { sequenceId, sequenceDefinition }  = action;\n      nextState = { ...state, activeSequence: null };\n      nextState.sequenceDefinitions[sequenceId] = sequenceDefinition;\n      nextState.sequences[sequenceId] = createSequence(sequenceDefinition);\n      nextState = timestamp(nextState);\n      break;\n    case CANCEL_SAVE_SEQUENCE_DEFINITION:\n      nextState = {...state, activeSequence: null }; \n      break;\n    default:\n      nextState = state;\n      break;\n  }\n     \n    saveToLocalstorage(STORAGE_KEY, nextState);\n    return nextState;\n}\n","import { createStore } from 'redux';\nimport { tables } from '../reducers';\n\nexport const appStore = createStore(tables)\n","export const CONFIGURE_SEQUENCE = 'CONFIGURE_SEQUENCE';\n\nexport function configureSequence(sequenceId) {\n  return {\n    type: CONFIGURE_SEQUENCE,\n    sequenceId\n  };\n}\n","export const SAVE_SEQUENCE_DEFINITION = 'SAVE_SEQUENCE_DEFINITION';\n\nexport function saveSequenceDefinition(sequenceId, sequenceDefinition) {\n  return {\n    type: SAVE_SEQUENCE_DEFINITION,\n    sequenceId,\n    sequenceDefinition\n  };\n}\n","export const CANCEL_SAVE_SEQUENCE_DEFINITION = 'CANCEL_SAVE_SEQUENCE_DEFINITION';\n\nexport function cancelSaveSequenceDefinition() {\n  return {\n    type: CANCEL_SAVE_SEQUENCE_DEFINITION,\n  };\n}\n","import React from 'react';\nimport './SequenceTable.css';\n\nclass SequenceTable extends React.Component {\n  render() {\n    const { rows } = this.props;\n    return (\n      <table className=\"sequence-table\">\n        <tbody>\n          {rows.map((row, index) => (\n            <tr key={index}>\n              {row.map((val, index) => (\n                <td key={index} disabled={val === null}>{val}</td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  }\n}\n\nexport { SequenceTable };\n","import React from 'react';\nimport { SequenceTable } from './SequenceTable';\nimport './ConfigurableSequenceTable.css';\n\nexport function ConfigurableSequenceTable({ rows, sequenceId, width, onConfigureClick }) {\n  const widthPercent = `${width}%`\n  const styles = { width: widthPercent }\n  return (\n    <div className=\"configurable-sequence-table\" style={styles} data-sequence-id={sequenceId}>\n      <SequenceTable key={sequenceId} rows={rows} />\n      <footer>\n        <button onClick={onConfigureClick}>Configure</button>\n        <div className=\"width-text\">{widthPercent}</div>\n      </footer>\n    </div>\n  )\n}\n","import React from 'react';\nimport { toInt } from '../utils';\nimport './ConfigureForm.css';\n\nexport function SequenceId({ color }) {\n  const styles = { color };\n  return (\n    <span className=\"table-key\" style={styles}>{color}</span>\n  )\n}\n\nfunction FormRow({ children }) {\n  return (\n    <div className=\"form-row\">{children}</div>\n  )\n}\n\nexport class ConfigureForm extends React.Component {\n  constructor() {\n    super();\n    this.form = React.createRef();\n  }\n  componentDidMount() {\n    this.restoreFocusTo = document.activeElement;\n    const firstInput = this.form.current.querySelector('input');\n    firstInput.focus();\n  }\n  componentWillUnmount() {\n    this.restoreFocusTo.focus();\n  }\n  handleCancel = (e) => {\n    e.preventDefault();\n    this.props.onCancel();\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const { sequenceId, sequenceDef, onSubmit } = this.props;\n    const newSequenceDef = Object.keys(sequenceDef).reduce((acc, key) => {\n      const form = this.form.current;\n      if (form[key]) {\n        acc[key] = form[key].getAttribute('data-type') === 'int' ? toInt(form[key].value) : form[key].value;\n      }\n      return acc;\n    }, { ...sequenceDef });\n    onSubmit(sequenceId, newSequenceDef);\n  }\n  render() {\n    const { sequenceId, sequenceDef } = this.props;\n    return (\n      <div className=\"configure-form\">\n        <h2>Table: <SequenceId color={sequenceId}>{sequenceId}</SequenceId></h2>\n        <form ref={this.form} onSubmit={this.handleSubmit}>\n          <FormRow>\n            <label htmlFor=\"start\">N =</label>\n            <input type=\"text\" name=\"start\" defaultValue={sequenceDef.start} data-type=\"int\" />\n          </FormRow>\n          <FormRow>\n            <label htmlFor=\"step\">X =</label>\n            <input type=\"text\" name=\"step\" defaultValue={sequenceDef.step} data-type=\"int\" />\n          </FormRow>\n          <FormRow>\n            <label htmlFor=\"end\">M =</label>\n            <input type=\"text\" name=\"end\" defaultValue={sequenceDef.end} data-type=\"int\" />\n          </FormRow>\n          <FormRow>\n            <label htmlFor=\"width\">W =</label>\n            <input type=\"text\" name=\"width\" defaultValue={sequenceDef.width} data-type=\"int\" />%\n        </FormRow>\n          <FormRow>\n            <label htmlFor=\"w\">W =</label>\n            <select name=\"direction\" defaultValue={sequenceDef.direction}>\n              <option value=\"LTR\">LTR</option>\n              <option value=\"RTL\">RTL</option>\n            </select>\n          </FormRow>\n          <FormRow>\n            <button onClick={this.handleSubmit}>Save</button>\n            <button onClick={this.handleCancel}>Cancel</button>\n          </FormRow>\n        </form>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport './App.css';\nimport { ConfigurableSequenceTable } from './components/ConfigurableSequenceTable';\nimport { configureSequence } from './actions/configureSequence';\nimport { saveSequenceDefinition } from './actions/saveSequenceDefinition';\nimport { cancelSaveSequenceDefinition } from './actions/cancelSaveSequenceDefinition';\nimport { ConfigureForm } from './components/ConfigureForm';\n\nexport function App({ sequenceDefinitions, sequences, activeSequence, configureSequence, saveSequenceDefinition, cancelSaveSequenceDefinition }) {\n  const showConfigure = Boolean(activeSequence);\n  return (\n    <div className=\"app\">\n      <section className=\"tables\">\n        { Object.entries(sequences).map(( [sequenceId, seq ]) => (\n          <ConfigurableSequenceTable \n            key={sequenceId} \n            sequenceId={sequenceId}\n            rows={seq} \n            width={sequenceDefinitions[sequenceId].width}\n            onConfigureClick={() => configureSequence(sequenceId)} />))\n            }\n      </section>\n      { showConfigure && \n        <ConfigureForm \n          key={activeSequence}\n          sequenceId={activeSequence} \n          sequenceDef={sequenceDefinitions[activeSequence]}\n          onSubmit={saveSequenceDefinition} \n          onCancel={cancelSaveSequenceDefinition}\n          />}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => state;\nconst mapDispatchToProps = { configureSequence, saveSequenceDefinition, cancelSaveSequenceDefinition }; \n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { appStore } from './stores';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={appStore}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}